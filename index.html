<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nosso Almo√ßo ‚Äî Convite</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#fff4f8; --bg2:#ffe6ee; --ink:#4a2b36; --muted:#7a5a64; --rose:#ff7aa2; --rose2:#ff3d6e; --peach:#ffb199; --cream:#fff9fb;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--ink);background:radial-gradient(900px 600px at 20% -10%,rgba(255,170,195,.35),transparent 60%),radial-gradient(900px 600px at 120% 10%,rgba(255,210,220,.45),transparent 60%),linear-gradient(180deg,var(--bg1),var(--bg2));overflow:hidden}
    a{color:var(--rose2);text-decoration:none}

    /* Hearts background */
    #hearts{position:fixed;inset:0;z-index:0}

    .wrap{position:relative;z-index:1;min-height:100dvh;display:grid;place-items:center;padding:24px}
    .card{width:min(880px,95vw);background:rgba(255,255,255,.7);backdrop-filter:blur(10px);border-radius:28px;border:1px solid rgba(255,80,120,.25);box-shadow:0 15px 80px rgba(255,62,116,.16), inset 0 1px 0 rgba(255,255,255,.6);padding:30px 30px 36px;position:relative;overflow:hidden}
    .ribbon{position:absolute;inset:auto -60px -60px auto;width:220px;height:220px;background:conic-gradient(from 0deg,var(--rose),var(--rose2),var(--peach),var(--rose));filter:blur(28px);opacity:.25;border-radius:50%}

    header{text-align:center;margin-bottom:10px}
    .romantic{font-family:"Great Vibes",cursive;font-size:clamp(42px,7vw,72px);line-height:1;color:var(--rose2);text-shadow:0 6px 24px rgba(255,61,110,.25)}
    .subtitle{margin:6px auto 10px;color:var(--muted);font-size:15px}

    .details{display:grid;gap:8px;margin:14px auto 12px;text-align:center}
    .details strong{color:#7d2a43}

    .countdown{display:flex;justify-content:center;gap:12px;margin:12px 0 22px}
    .pill{min-width:78px;border:1px solid rgba(255,62,116,.25);border-radius:14px;padding:12px 12px;text-align:center;background:linear-gradient(180deg,rgba(255,255,255,.85),rgba(255,255,255,.6));box-shadow:inset 0 1px 0 rgba(255,255,255,.6),0 6px 20px rgba(255,62,116,.08)}
    .pill .num{font-weight:700;font-size:26px;display:block}
    .pill .lbl{font-size:12px;color:var(--muted)}

    .cta{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin:6px 0 10px}
    .btn{cursor:pointer;border:0;border-radius:14px;padding:12px 16px;font-weight:700;letter-spacing:.02em;transition:transform .12s ease,filter .2s}
    .btn:active{transform:translateY(1px) scale(.995)}
    .btn-primary{background:linear-gradient(90deg,var(--rose),var(--rose2));color:white;box-shadow:0 10px 34px rgba(255,61,110,.25)}
    .btn-ghost{background:transparent;border:1px solid rgba(255,62,116,.25);color:var(--ink)}
    .btn-outline{background:transparent;border:1px solid var(--rose2);color:var(--ink)}

    .divider{height:1px;background:linear-gradient(90deg,transparent,rgba(255,62,116,.25),transparent);margin:18px 0}

    .secret{display:grid;gap:12px;margin-top:8px}
    .secret[hidden]{display:none}
    .grid{display:grid;gap:12px;grid-template-columns:1fr}
    @media (min-width:820px){.grid{grid-template-columns:1.1fr .9fr}}

    .panel{border:1px solid rgba(255,62,116,.2);border-radius:18px;padding:16px;background:rgba(255,255,255,.78);box-shadow:inset 0 1px 0 rgba(255,255,255,.7)}
    .panel h3{margin:0 0 10px;font-weight:700;color:#7d2a43}
    .panel ul{margin:0;padding-left:18px}

    .qrbox{display:grid;place-items:center;border:1px dashed rgba(255,62,116,.35);border-radius:14px;padding:16px;background:rgba(255,255,255,.6)}
    .qrbox img{max-width:180px;border-radius:10px}
    .small{font-size:12px;color:var(--muted);text-align:center}

    footer{margin-top:16px;text-align:center;color:var(--muted);font-size:12px}

    /* Confetti hearts */
    #confetti{position:fixed;inset:0;pointer-events:none;z-index:2}
  </style>
</head>
<body>
  <canvas id="hearts"></canvas>
  <div class="wrap">
    <div class="card">
      <div class="ribbon" aria-hidden="true"></div>
      <header>
        <div class="romantic">Nosso Almo√ßo Rom√¢ntico</div>
        <div class="subtitle">Um convite com carinho para um almo√ßo.</div>
      </header>

      <section class="details">
        <div><strong id="whenText">S√°bado, 13/09/2025 ‚Ä¢ 12:30</strong></div>
        <div>Local: <strong id="whereText">Minha casa (coordenadas confidenciais üòé)</strong></div>
      </section>

      <section class="countdown" id="countdown">
        <div class="pill"><span class="num" id="dd">00</span><span class="lbl">dias</span></div>
        <div class="pill"><span class="num" id="hh">00</span><span class="lbl">horas</span></div>
        <div class="pill"><span class="num" id="mm">00</span><span class="lbl">min</span></div>
        <div class="pill"><span class="num" id="ss">00</span><span class="lbl">seg</span></div>
      </section>

      <div class="cta">
        <button class="btn btn-primary" id="btnAccept">Quero ir üíñ</button>
        <button class="btn btn-ghost" id="btnMaybe">Talvez depois</button>
        <button class="btn btn-outline" id="btnICS">Adicionar ao calend√°rio</button>
      </div>

      <div class="divider"></div>

      <section class="secret" id="secret" hidden>
        <div class="grid">
          <div class="panel">
            <h3>Menu do dia</h3>
            <ul id="menuList"></ul>
          </div>
          <div class="panel">
            <h3>Acesso</h3>
            <div class="qrbox">
              <img id="qrImg" alt="QR Code do convite" />
            </div>
            <div class="small" style="margin-top:8px">Escaneie para abrir este convite no celular</div>
            <div style="display:flex;gap:8px;justify-content:center;margin-top:10px">
              <a id="privateLink" class="btn btn-ghost" href="#" target="_blank" rel="noreferrer noopener">Abrir link</a>
              <button id="btnCopy" class="btn btn-ghost">Copiar link</button>
            </div>
          </div>
        </div>
      </section>

      <footer>Com amor, de mim para voc√™. üíê</footer>
    </div>
  </div>

  <canvas id="confetti"></canvas>

  <script>
    // ===== CONFIGURA√á√ÉO DO CONVITE =====
    const INVITE = {
      title: 'Convite almo√ßo',
      description: 'Miss√£o especial: um almo√ßo simples e cheio de carinho.‚ú®',
      date: '2025-09-13',       // AAAA-MM-DD
      time: '12:30',            // HH:MM (America/Recife -03:00)
      tzOffset: '-03:00',
      location: 'Minha casa (coordenadas confidenciais üòé)',
      link: 'https://servicenuv-ai.github.io/invite-love/',
      durationMins: 120,
      menu: [
        'Entrada: Petiscos',
        'Principal: Strogonoff de frango & Lasanha',
        'Bebida: Suco de uva/ frutas',
        'Sobremesa: Sorvete e Bolo'
      ]
    };
    // ====================================

    // Utilidades de data
    function parseLocalISO(dateStr, timeStr, tz) {
      return new Date(`${dateStr}T${timeStr}:00${tz}`);
    }
    function pad(n){return String(n).padStart(2,'0')}
    function fmtHuman(d){
      const dias = ['Domingo','Segunda','Ter√ßa','Quarta','Quinta','Sexta','S√°bado'];
      return `${dias[d.getDay()]}, ${pad(d.getDate())}/${pad(d.getMonth()+1)}/${d.getFullYear()} ‚Ä¢ ${pad(d.getHours())}:${pad(d.getMinutes())}`;
    }

    const start = parseLocalISO(INVITE.date, INVITE.time, INVITE.tzOffset);
    const end   = new Date(start.getTime() + INVITE.durationMins*60000);

    // Preenche textos
    document.getElementById('whenText').textContent = fmtHuman(start);
    document.getElementById('whereText').textContent = INVITE.location;
    const ul = document.getElementById('menuList'); ul.innerHTML = '';
    for(const item of INVITE.menu){ const li = document.createElement('li'); li.textContent=item; ul.appendChild(li); }

    // Countdown
    const dd=document.getElementById('dd'), hh=document.getElementById('hh'), mm=document.getElementById('mm'), ss=document.getElementById('ss');
    function tick(){
      const now = new Date();
      let diff = Math.max(0, start - now);
      const d = Math.floor(diff/86400000); diff-=d*86400000;
      const h = Math.floor(diff/3600000);  diff-=h*3600000;
      const m = Math.floor(diff/60000);    diff-=m*60000;
      const s = Math.floor(diff/1000);
      dd.textContent=pad(d); hh.textContent=pad(h); mm.textContent=pad(m); ss.textContent=pad(s);
    }
    tick(); setInterval(tick,1000);

    // QR Code
    const qrImg = document.getElementById('qrImg');
    const dataForQR = encodeURIComponent(INVITE.link);
    qrImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=240x240&data=${dataForQR}`;
    document.getElementById('privateLink').href = INVITE.link;

    // Copiar link
    document.getElementById('btnCopy').addEventListener('click', async () => {
      try{ await navigator.clipboard.writeText(INVITE.link); toast('Link copiado!'); }catch(e){ toast('N√£o foi poss√≠vel copiar üòÖ'); }
    });

    // Bot√µes de a√ß√£o
    const secret = document.getElementById('secret');
    document.getElementById('btnAccept').addEventListener('click', ()=>{ secret.hidden=false; heartsBurst(); toast('Te esperando com carinho üíñ'); });
    document.getElementById('btnMaybe').addEventListener('click', ()=>{ toast('Sem pressa ‚Äî estarei aqui ‚ú®'); });

    // Adicionar ao calend√°rio (gera ICS)
    document.getElementById('btnICS').addEventListener('click', ()=>{
      const ics = makeICS({
        title: INVITE.title,
        description: INVITE.description + `\nLink: ${INVITE.link}`,
        location: INVITE.location,
        start,
        end
      });
      const blob = new Blob([ics], {type:'text/calendar;charset=utf-8'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'almoco-romantico.ics';
      document.body.appendChild(a); a.click(); a.remove();
    });

    function dtToICS(d){
      const y=d.getUTCFullYear(), m=pad(d.getUTCMonth()+1), da=pad(d.getUTCDate()), h=pad(d.getUTCHours()), mi=pad(d.getUTCMinutes()), s=pad(d.getUTCSeconds());
      return `${y}${m}${da}T${h}${mi}${s}Z`;
    }
    function makeICS({title,description,location,start,end}){
      const dtstamp = dtToICS(new Date());
      return [
        'BEGIN:VCALENDAR',
        'VERSION:2.0',
        'PRODID:-//Convite Romantico//PT-BR//',
        'CALSCALE:GREGORIAN',
        'METHOD:PUBLISH',
        'BEGIN:VEVENT',
        `UID:${crypto.randomUUID()}@convite-romantico`,
        `DTSTAMP:${dtstamp}`,
        `DTSTART:${dtToICS(start)}`,
        `DTEND:${dtToICS(end)}`,
        `SUMMARY:${escapeICS(title)}`,
        `DESCRIPTION:${escapeICS(description)}`,
        `LOCATION:${escapeICS(location)}`,
        'END:VEVENT',
        'END:VCALENDAR' 
      ].join('\r\n');
    }
    function escapeICS(s){ return String(s).replace(/[\\,;\n]/g, m=> ({'\\':'\\\\',',':'\\,',';':'\\;','\n':'\\n'}[m]) ); }

    // Toast minimalista
    function toast(msg){
      const t=document.createElement('div');
      t.textContent=msg; 
      t.style.cssText='position:fixed;left:50%;top:24px;transform:translateX(-50%);background:rgba(80,20,35,.85);color:#fff;padding:10px 14px;border:1px solid rgba(255,255,255,.2);border-radius:12px;z-index:9999;backdrop-filter:blur(6px)';
      document.body.appendChild(t); setTimeout(()=>t.remove(), 2200);
    }

    // Fundo de cora√ß√µes suaves
    ;(function(){
      const c=document.getElementById('hearts'); const ctx=c.getContext('2d');
      let w,h, DPR=window.devicePixelRatio||1; let arr=[]; const COUNT=80;
      function resize(){ w=window.innerWidth; h=window.innerHeight; c.width=w*DPR; c.height=h*DPR; ctx.setTransform(DPR,0,0,DPR,0,0); }
      function heartPath(ctx,size){ ctx.beginPath(); const s=size; ctx.moveTo(0,-s/6); ctx.bezierCurveTo(s/2,-s*0.9, s*1.3,-s*0.1, 0,s); ctx.bezierCurveTo(-s*1.3,-s*0.1, -s/2,-s*0.9, 0,-s/6); ctx.closePath(); }
      function spawn(){ return {x:Math.random()*w, y:h+Math.random()*h, vy:-(.3+Math.random()*0.6), vx:(Math.random()-.5)*.2, size:10+Math.random()*18, a:.12+.12*Math.random(), r:Math.random()*Math.PI}; }
      function init(){ arr=Array.from({length:COUNT},spawn); }
      function step(){ ctx.clearRect(0,0,w,h); for(const p of arr){ p.x+=p.vx; p.y+=p.vy; p.r+=0.01; if(p.y<-30) Object.assign(p, spawn(), {y:h+20}); ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.r); ctx.globalAlpha=p.a; const grad=ctx.createLinearGradient(-p.size, -p.size, p.size, p.size); grad.addColorStop(0,'#ff9db8'); grad.addColorStop(1,'#ff5a86'); ctx.fillStyle=grad; heartPath(ctx,p.size); ctx.fill(); ctx.restore(); } requestAnimationFrame(step); }
      resize(); init(); step(); window.addEventListener('resize', resize);
    })();

    // Explos√£o de cora√ß√µes (confetti) ao aceitar
    function heartsBurst(){
      const c=document.getElementById('confetti'); const ctx=c.getContext('2d');
      const DPR=window.devicePixelRatio||1; let w=window.innerWidth, h=window.innerHeight; c.width=w*DPR; c.height=h*DPR; ctx.setTransform(DPR,0,0,DPR,0,0);
      const N=160; const parts=Array.from({length:N},()=>({x:w/2, y:h/2, vx:(Math.random()-0.5)*6, vy:(Math.random()-1.2)*8, g:0.18+Math.random()*0.08, s:6+Math.random()*10, a:1, r:Math.random()*Math.PI}));
      function heartPath(ctx,size){ ctx.beginPath(); const s=size; ctx.moveTo(0,-s/3); ctx.bezierCurveTo(s/2,-s, s*1.2,-s*0.1, 0,s); ctx.bezierCurveTo(-s*1.2,-s*0.1, -s/2,-s, 0,-s/3); ctx.closePath(); }
      let t=0; const colors=['#ff7aa2','#ff3d6e','#ffb199','#ff8fb3','#ffcad4'];
      function frame(){ ctx.clearRect(0,0,w,h); for(const p of parts){ p.vy+=p.g; p.x+=p.vx; p.y+=p.vy; p.a-=0.012; p.r+=0.08; ctx.save(); ctx.globalAlpha=Math.max(0,p.a); ctx.translate(p.x,p.y); ctx.rotate(p.r); ctx.fillStyle=colors[(Math.random()*colors.length)|0]; heartPath(ctx,p.s); ctx.fill(); ctx.restore(); }
        t++; if(t<180) requestAnimationFrame(frame); else ctx.clearRect(0,0,w,h);
      }
      frame();
    }
  </script>
</body>
</html>
